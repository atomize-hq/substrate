{
  "version": 2,
  "principle": "sequenced_only",
  "decisions": {
    "runtime_config_format": "yaml_only",
    "backward_compat_policy": "greenfield_breaking_ok"
  },
  "notes": [
    "This file defines the preferred execution order for upcoming feature sprints.",
    "Work is sequenced sprint-by-sprint; within a sprint, execute triads per docs/project_management/standards/TASK_TRIADS_AND_FEATURE_SETUP.md (code + test can run concurrently; integration lands).",
    "Avoid interleaving work across sprints to minimize merge/conflict risk and schema churn."
  ],
  "sprints": [
    {
      "order": 10,
      "id": "yaml_settings_migration",
      "title": "Runtime settings migration: TOML â†’ YAML",
      "branch": "feat/yaml-settings-migration",
      "directory": "docs/project_management/next/yaml-settings-migration",
      "plan": "docs/project_management/next/yaml-settings-migration/plan.md",
      "status": "completed",
      "sequence": [{ "id": "Y0", "spec": "docs/project_management/next/yaml-settings-migration/Y0-spec.md" }],
      "notes": [
        "This is the smallest migration needed to reach YAML-only for Substrate-owned runtime config.",
        "Land before any work that adds new settings keys (world-sync, world-deps selection, agent-hub config extensions)."
      ]
    },
    {
      "order": 15,
      "id": "p0_platform_stability",
      "title": "P0 platform stability",
      "branch": "feat/p0-platform-stability",
      "directory": "docs/project_management/next/p0-platform-stability",
      "plan": "docs/project_management/next/p0-platform-stability/plan.md",
      "status": "completed",
      "sequence": [{ "id": "LP1", "spec": "docs/project_management/next/p0-platform-stability/LP1-spec.md" }],
      "notes": [
        "Bundles socket activation, replay polish, and health mismatch fixes under one coordination umbrella.",
        "Land before macOS parity work so the parity sprint can mirror the final Linux/WSL behavior."
      ]
    },
    {
      "order": 16,
      "id": "p0_platform_stability_macos_parity",
      "title": "P0 platform stability: macOS parity",
      "branch": "feat/p0-platform-stability-macOS-parity",
      "directory": "docs/project_management/next/p0-platform-stability-macOS-parity",
      "plan": "docs/project_management/next/p0-platform-stability-macOS-parity/plan.md",
      "status": "completed",
      "sequence": [
        { "id": "M1", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M1-spec.md" },
        { "id": "M2", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M2-spec.md" },
        { "id": "M3", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M3-spec.md" },
        { "id": "M4", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M4-spec.md" },
        { "id": "M5a", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M5a-spec.md" },
        { "id": "M5b", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M5b-spec.md" },
        { "id": "M5c", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M5c-spec.md" },
        { "id": "M6", "spec": "docs/project_management/next/p0-platform-stability-macOS-parity/M6-spec.md" }
      ],
      "notes": [
        "Bridges the P0 platform stability behavior set to macOS (Lima guest + host UX parity).",
        "Treat WSL coverage separately: either extend Windows smoke scripts to include WSL assertions, or use a self-hosted Windows+WSL runner."
      ]
    },
    {
      "order": 20,
      "id": "agent_hub_isolation_hardening",
      "title": "Agent hub isolation hardening",
      "branch": "feat/p0-agent-hub-isolation-hardening",
      "directory": "docs/project_management/next/p0-agent-hub-isolation-hardening",
      "plan": "docs/project_management/next/p0-agent-hub-isolation-hardening/ADR-0001-agent-hub-runtime-config-and-isolation.md",
      "status": "completed",
      "sequence": [
        { "id": "I0", "spec": "docs/project_management/next/p0-agent-hub-isolation-hardening/I0-spec.md" },
        { "id": "I1", "spec": "docs/project_management/next/p0-agent-hub-isolation-hardening/I1-spec.md" },
        { "id": "I2", "spec": "docs/project_management/next/p0-agent-hub-isolation-hardening/I2-spec.md" },
        { "id": "I3", "spec": "docs/project_management/next/p0-agent-hub-isolation-hardening/I3-spec.md" },
        { "id": "I4", "spec": "docs/project_management/next/p0-agent-hub-isolation-hardening/I4-spec.md" },
        { "id": "I5", "spec": "docs/project_management/next/p0-agent-hub-isolation-hardening/I5-spec.md" }
      ],
      "notes": [
        "I2/I3 full cage must mount `/var/lib/substrate/world-deps` read-write so ADR-0002 user-space world-deps installs remain compatible under pivot_root (see docs/project_management/next/world_deps_selection_layer/decision_register.md DR-0008)."
      ]
    },
    {
      "order": 25,
      "id": "policy_and_config_mental_model_simplification",
      "title": "Policy + config mental model simplification",
      "branch": "feat/policy_and_config",
      "directory": "docs/project_management/next/policy_and_config_mental_model_simplification",
      "plan": "docs/project_management/next/policy_and_config_mental_model_simplification/plan.md",
      "status": "completed",
      "sequence": [
        {
          "id": "PCM0",
          "spec": "docs/project_management/next/policy_and_config_mental_model_simplification/PCM0-spec.md"
        },
        {
          "id": "PCM1",
          "spec": "docs/project_management/next/policy_and_config_mental_model_simplification/PCM1-spec.md"
        },
        {
          "id": "PCM2",
          "spec": "docs/project_management/next/policy_and_config_mental_model_simplification/PCM2-spec.md"
        },
        {
          "id": "PCM3",
          "spec": "docs/project_management/next/policy_and_config_mental_model_simplification/PCM3-spec.md"
        }
      ],
      "notes": [
        "Land before world_sync to avoid building new features on legacy config/policy/env semantics that ADR-0003 removes.",
        "World-sync planning docs MUST be updated to align with ADR-0003 before implementing world_sync code (at minimum C0/C1; expand to more tasks if needed to cover additional world-sync specs)."
      ]
    },
    {
      "order": 26,
      "id": "policy_and_config_precedence",
      "title": "Policy + config precedence correction (workspace > env)",
      "branch": "feat/policy_and_config_precedence",
      "directory": "docs/project_management/_archived/policy_and_config_precedence",
      "plan": "docs/project_management/_archived/policy_and_config_precedence/plan.md",
      "status": "completed",
      "sequence": [
        {
          "id": "PCP0",
          "spec": "docs/project_management/_archived/policy_and_config_precedence/PCP0-spec.md"
        }
      ],
      "notes": [
        "Implements ADR-0005 by reordering effective config precedence so workspace config overrides env exports when a workspace exists.",
        "Land before world_sync so future features do not depend on the env-overrides-workspace footgun."
      ]
    },
    {
      "order": 26.5,
      "id": "env_var_taxonomy_and_override_split",
      "title": "Env var taxonomy + override split",
      "branch": "feat/env_var_taxonomy_and_override_split",
      "directory": "docs/project_management/_archived/env_var_taxonomy_and_override_split",
      "plan": "docs/project_management/_archived/env_var_taxonomy_and_override_split/plan.md",
      "status": "completed",
      "sequence": [
        {
          "id": "EV0",
          "spec": "docs/project_management/_archived/env_var_taxonomy_and_override_split/EV0-spec.md"
        }
      ],
      "notes": [
        "Implements ADR-0006 by splitting config override inputs (SUBSTRATE_OVERRIDE_*) from exported state (SUBSTRATE_*).",
        "Sequenced after policy_and_config_precedence (PCP0) to avoid simultaneous churn in the effective-config resolver."
      ]
    },
	    {
	      "order": 27,
	      "id": "world_overlayfs_enumeration",
	      "title": "Linux world overlayfs enumeration reliability",
	      "branch": "feat/world-overlayfs-enumeration",
	      "directory": "docs/project_management/next/world-overlayfs-enumeration",
	      "plan": "docs/project_management/next/world-overlayfs-enumeration/plan.md",
	      "status": "completed",
	      "sequence": [
	        { "id": "WO0", "spec": "docs/project_management/next/world-overlayfs-enumeration/WO0-spec.md" }
	      ],
	      "notes": [
	        "Land before world_sync to ensure world execution is usable for interactive workflows and reliable for integration testing.",
	        "Includes a strict correctness fix (mount topology) plus a fallback safety net (strategy retry) for host/kernel variance."
	      ]
	    },
	    {
	      "order": 27.5,
	      "id": "doctor_scopes",
	      "title": "Doctor scopes (host vs world)",
	      "branch": "feat/doctor-scopes",
	      "directory": "docs/project_management/next/doctor_scopes",
	      "plan": "docs/project_management/next/doctor_scopes/plan.md",
	      "status": "completed",
	      "sequence": [{ "id": "DS0", "spec": "docs/project_management/next/doctor_scopes/DS0-spec.md" }],
	      "notes": [
	        "Clarifies what is host readiness vs in-world enforcement readiness, especially on macOS (Lima guest kernel facts).",
	        "Introduces a world-agent doctor endpoint to avoid requiring a guest-installed substrate CLI for world diagnostics."
	      ]
	    },
	    {
	      "order": 28,
	      "id": "world_deps_selection_layer",
	      "title": "World deps selection layer",
	      "branch": "feat/world-sync",
	      "directory": "docs/project_management/next/world_deps_selection_layer",
	      "plan": "docs/project_management/next/world_deps_selection_layer/plan.md",
	      "status": "not_started",
	      "sequence": [
	        { "id": "WDL0", "spec": "docs/project_management/next/world_deps_selection_layer/S0-spec-selection-config-and-ux.md" },
	        { "id": "WDL1", "spec": "docs/project_management/next/world_deps_selection_layer/S1-spec-install-classes.md" },
	        { "id": "WDL2", "spec": "docs/project_management/next/world_deps_selection_layer/S2-spec-system-packages-provisioning.md" }
	      ],
	      "notes": [
	        "Implements ADR-0002 world-deps selection + install classes + provisioning.",
	        "Sequenced before world_sync so C1 can assume the selection/UX model is stable."
	      ]
	    },
	    {
	      "order": 29,
	      "id": "workspace_config_policy_unification",
	      "title": "Workspace config/policy scopes + .substrate unification (patch files)",
	      "branch": "feat/workspace-config-policy-unification",
	      "directory": "docs/project_management/next/workspace-config-policy-unification",
	      "plan": "docs/project_management/next/ADR-0008-workspace-config-policy-scope-and-dot-substrate-unification.md",
	      "status": "not_started",
	      "sequence": [
	        { "id": "WCU1", "name": "Workspace directory + internal git unification" },
	        { "id": "WCU2", "name": "Config/policy patch parsing + merge" },
	        { "id": "WCU3", "name": "CLI scopes + reset semantics + explain" },
	        { "id": "WCU4", "name": "Installer/dev env cleanup (no override exports)" },
	        { "id": "WCU5", "name": "Docs + smoke + playbook alignment" }
	      ],
	      "notes": [
	        "Cross-cutting contract consolidation: explicit current/global/workspace CLIs; patch files; workspace disable marker; internal git under .substrate/.",
	        "Removes default export of SUBSTRATE_OVERRIDE_* from install/dev scripts."
	      ]
	    },
	    {
	      "order": 30,
	      "id": "world_sync",
	      "title": "World sync + .substrate-git",
	      "branch": "feat/world-sync",
      "directory": "docs/project_management/next/world-sync",
      "plan": "docs/project_management/next/world-sync/plan.md",
      "status": "not_started",
      "sequence": [
        { "id": "C0", "spec": "docs/project_management/next/world-sync/C0-spec.md" },
        { "id": "C1", "spec": "docs/project_management/next/world-sync/C1-spec.md" },
        { "id": "C2", "spec": "docs/project_management/next/world-sync/C2-spec.md" },
        { "id": "C3", "spec": "docs/project_management/next/world-sync/C3-spec.md" },
        { "id": "C4", "spec": "docs/project_management/next/world-sync/C4-spec.md" },
        { "id": "C5", "spec": "docs/project_management/next/world-sync/C5-spec.md" },
        { "id": "C6", "spec": "docs/project_management/next/world-sync/C6-spec.md" },
        { "id": "C7", "spec": "docs/project_management/next/world-sync/C7-spec.md" },
        { "id": "C8", "spec": "docs/project_management/next/world-sync/C8-spec.md" },
        { "id": "C9", "spec": "docs/project_management/next/world-sync/C9-spec.md" }
      ],
	      "notes": [
	        "C0/C1 land the core workspace model and CLI/config prerequisites for sync; world_deps_selection_layer is sequenced separately before deeper sync triads."
	      ]
	    },
	    {
	      "order": 40,
	      "id": "json_mode",
	      "title": "JSON mode (structured CLI I/O)",
	      "branch": "feat/json-mode",
	      "directory": "docs/project_management/future/json-mode",
	      "plan": "docs/project_management/future/json-mode/json_mode_plan.md",
	      "status": "not_started",
	      "sequence": [
	        { "id": "J1", "name": "Structured mode scaffolding" },
	        { "id": "J2a", "name": "Command coverage: core/root" },
	        { "id": "J2b", "name": "Command coverage: world/shim/health" },
	        { "id": "J2c", "name": "Command coverage: graph/advanced (+ world-deps sync/install)" },
	        { "id": "J3a", "name": "JSON input plumbing (simple consumers)" },
	        { "id": "J3b", "name": "JSON input for complex workflows" }
	      ]
	    }
	  ]
	}
