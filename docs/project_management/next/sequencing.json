{
  "version": 1,
  "principle": "sequenced_only",
  "notes": [
    "This file defines the preferred execution order for upcoming feature sprints/tracks.",
    "Items are intentionally sequenced (no parallel work) to minimize merge/conflict risk and schema churn."
  ],
  "tracks": [
    {
      "id": "agent_hub_isolation",
      "name": "Agent Hub Isolation Hardening",
      "source": "docs/project_management/next/p0-agent-hub-isolation-hardening/ADR-0001-agent-hub-runtime-config-and-isolation.md",
      "phases": [
        {
          "id": "A",
          "name": "Fail-closed semantics + enforce guarantees",
          "goals": [
            "No silent fallback when a requested security guarantee cannot be enforced",
            "Close known escapes into the project root (absolute-path mapping to overlay)"
          ],
          "deliverables": [
            "Policy semantics doc + implementation",
            "Cross-path parity between non-PTY and PTY execution for enforcement checks"
          ]
        },
        {
          "id": "B",
          "name": "Full caging (pivot_root/min-rootfs) + optional Landlock later",
          "goals": [
            "Prevent access outside the workspace/project unless explicitly allowed",
            "Align real isolation guarantees with docs/vision and agent-hub expectations"
          ],
          "deliverables": [
            "Linux full-cage execution mode (PTY + non-PTY parity)",
            "Clear detection + fail-closed behavior when full-cage is required but unavailable"
          ]
        }
      ]
    },
    {
      "id": "world_sync",
      "name": "World Sync + .substrate-git",
      "source": "docs/project_management/next/world-sync/plan.md",
      "phases": [
        { "id": "C0", "name": "Init + gating", "spec": "docs/project_management/next/world-sync/C0-spec.md" },
        { "id": "C1", "name": "Config/CLI surface", "spec": "docs/project_management/next/world-sync/C1-spec.md" },
        { "id": "C2", "name": "Manual world→host (non-PTY)", "spec": "docs/project_management/next/world-sync/C2-spec.md" },
        { "id": "C3", "name": "Auto-sync (non-PTY)", "spec": "docs/project_management/next/world-sync/C3-spec.md" },
        { "id": "C4", "name": "PTY diff + world→host", "spec": "docs/project_management/next/world-sync/C4-spec.md" },
        { "id": "C5", "name": "Host→world pre-sync", "spec": "docs/project_management/next/world-sync/C5-spec.md" },
        { "id": "C6", "name": ".substrate-git integration", "spec": "docs/project_management/next/world-sync/C6-spec.md" },
        { "id": "C7", "name": "Rollback CLI", "spec": "docs/project_management/next/world-sync/C7-spec.md" },
        { "id": "C8", "name": "World-side .substrate-git bridge", "spec": "docs/project_management/next/world-sync/C8-spec.md" },
        { "id": "C9", "name": "Init UX + migration", "spec": "docs/project_management/next/world-sync/C9-spec.md" }
      ]
    },
    {
      "id": "json_mode",
      "name": "JSON Mode (Structured CLI I/O)",
      "source": "docs/project_management/future/json-mode/json_mode_plan.md",
      "phases": [
        { "id": "J1", "name": "Structured mode scaffolding" },
        { "id": "J2a", "name": "Command coverage: core/root" },
        { "id": "J2b", "name": "Command coverage: world/shim/health" },
        { "id": "J2c", "name": "Command coverage: graph/advanced (+ world-deps sync/install)" },
        { "id": "J3a", "name": "JSON input plumbing (simple consumers)" },
        { "id": "J3b", "name": "JSON input for complex workflows" }
      ]
    }
  ],
  "sequence": [
    {
      "order": 10,
      "id": "agent_hub_isolation:A",
      "title": "Agent hub isolation sprint A",
      "depends_on": [],
      "blocks": ["world_sync:C4", "world_sync:C5", "json_mode:J2b", "json_mode:J2c"]
    },
    {
      "order": 20,
      "id": "world_sync:C0",
      "title": "World sync C0 (workspace init + gating)",
      "depends_on": ["agent_hub_isolation:A"],
      "blocks": ["world_sync:C1", "world_sync:C2", "world_sync:C3", "world_sync:C4", "world_sync:C5"]
    },
    {
      "order": 30,
      "id": "runtime_config_format:decision",
      "title": "Decide single runtime config format (YAML-only vs TOML-only)",
      "depends_on": ["world_sync:C0"],
      "blocks": ["world_sync:C1"],
      "notes": [
        "Make this decision before implementing world-sync C1, otherwise C1 will be rewritten.",
        "No dual-format support; migration is a breaking change but acceptable (greenfield)."
      ]
    },
    {
      "order": 40,
      "id": "world_sync:C1",
      "title": "World sync C1 (settings surface, no behavior change)",
      "depends_on": ["runtime_config_format:decision"],
      "blocks": ["world_sync:C2", "world_sync:C3", "world_sync:C4", "world_sync:C5"]
    },
    {
      "order": 50,
      "id": "world_deps:selection_layer",
      "title": "World-deps selection/allowlist + no-op when unconfigured",
      "depends_on": ["world_sync:C0", "runtime_config_format:decision"],
      "blocks": ["json_mode:J2b", "json_mode:J2c"],
      "notes": [
        "Prefer storing selection under the initialized workspace (.substrate/) rather than only in ~/.substrate/."
      ]
    },
    {
      "order": 60,
      "id": "world_sync:C2",
      "title": "World sync C2 (manual world→host, non-PTY)",
      "depends_on": ["world_sync:C1"],
      "blocks": ["world_sync:C3", "world_sync:C4", "world_sync:C5"]
    },
    {
      "order": 70,
      "id": "world_sync:C3",
      "title": "World sync C3 (auto-sync, non-PTY)",
      "depends_on": ["world_sync:C2"],
      "blocks": ["world_sync:C4", "world_sync:C5"]
    },
    {
      "order": 80,
      "id": "agent_hub_isolation:B",
      "title": "Agent hub isolation sprint B (full caging)",
      "depends_on": ["world_sync:C3"],
      "blocks": ["world_sync:C4", "world_sync:C5", "world_sync:C6", "json_mode:J2b", "json_mode:J2c"]
    },
    {
      "order": 90,
      "id": "world_sync:C4",
      "title": "World sync C4 (PTY diff + world→host)",
      "depends_on": ["agent_hub_isolation:B"],
      "blocks": ["world_sync:C5", "world_sync:C6"]
    },
    {
      "order": 100,
      "id": "world_sync:C5",
      "title": "World sync C5 (host→world pre-sync)",
      "depends_on": ["world_sync:C4"],
      "blocks": ["world_sync:C6"]
    },
    {
      "order": 110,
      "id": "world_sync:C6",
      "title": "World sync C6 (.substrate-git integration)",
      "depends_on": ["world_sync:C5"],
      "blocks": ["world_sync:C7", "world_sync:C8", "world_sync:C9"]
    },
    {
      "order": 120,
      "id": "world_sync:C7",
      "title": "World sync C7 (rollback CLI)",
      "depends_on": ["world_sync:C6"],
      "blocks": ["world_sync:C8", "world_sync:C9"]
    },
    {
      "order": 130,
      "id": "world_sync:C8",
      "title": "World sync C8 (world-side .substrate-git bootstrap/bridge)",
      "depends_on": ["world_sync:C7"],
      "blocks": ["world_sync:C9"]
    },
    {
      "order": 140,
      "id": "world_sync:C9",
      "title": "World sync C9 (init UX + migration)",
      "depends_on": ["world_sync:C8"],
      "blocks": ["json_mode:J1"]
    },
    {
      "order": 150,
      "id": "json_mode:J1",
      "title": "JSON mode J1 (global structured flags + envelope)",
      "depends_on": ["world_sync:C9", "world_deps:selection_layer"],
      "blocks": ["json_mode:J2a", "json_mode:J2b", "json_mode:J2c", "json_mode:J3a", "json_mode:J3b"]
    },
    {
      "order": 160,
      "id": "json_mode:J2a",
      "title": "JSON mode J2a (core/root command coverage)",
      "depends_on": ["json_mode:J1"],
      "blocks": ["json_mode:J2b", "json_mode:J2c"]
    },
    {
      "order": 170,
      "id": "json_mode:J2b",
      "title": "JSON mode J2b (world/shim/health coverage)",
      "depends_on": ["json_mode:J2a"],
      "blocks": ["json_mode:J2c"]
    },
    {
      "order": 180,
      "id": "json_mode:J2c",
      "title": "JSON mode J2c (graph/advanced + world-deps sync/install coverage)",
      "depends_on": ["json_mode:J2b"],
      "blocks": ["json_mode:J3a", "json_mode:J3b"]
    },
    {
      "order": 190,
      "id": "json_mode:J3a",
      "title": "JSON mode J3a (JSON input plumbing, simple consumers)",
      "depends_on": ["json_mode:J2c"],
      "blocks": ["json_mode:J3b"]
    },
    {
      "order": 200,
      "id": "json_mode:J3b",
      "title": "JSON mode J3b (complex workflow JSON input)",
      "depends_on": ["json_mode:J3a"],
      "blocks": []
    }
  ]
}

